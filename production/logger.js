const fs=require("fs"),winston=require("winston"),timeStamp=()=>{const datetime=new Date;return`${datetime.getMonth()+1}/${datetime.getDate()} ${datetime.toLocaleTimeString()}`};let buildNumber="Unknown";try{buildNumber=fs.readFileSync("current_build.txt","utf8").toString().replace(/\D/g,"")}catch(err){}const logger=new winston.Logger({transports:[new winston.transports.Console({timestamp:timeStamp,json:!1,showLevel:!1,colorize:!0,level:"debug",formatter:options=>{const ts=options.timestamp(),action=options.meta.action?`${options.meta.action} `:"",agent=options.meta.agent?options.meta.agent:"",meta=action||agent?`[${action}${agent}]`:"",message=options.message?options.message:"";return`${ts} ${winston.config.colorize(options.level,`${meta} ${message}`)}`}}),new winston.transports.File({filename:`logs/Build-${buildNumber}.log`,timestamp:timeStamp,json:!1,showLevel:!1,level:"server",formatter:options=>{const ts=options.timestamp(),action=options.meta.action?`${options.meta.action} `:"",agent=options.meta.agent?options.meta.agent:"";return`${ts} ${action||agent?`[${action}${agent}]`:""} ${options.message?options.message:""}`}})],levels:{error:0,game:1,chat:1,socket:2,server:2},colors:{error:"red",game:"magenta",chat:"white",socket:"cyan",server:"green",debug:"grey"}});module.exports=logger;