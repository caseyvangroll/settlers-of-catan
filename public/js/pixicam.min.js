!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.pixicam=t()}}(function(){var t;return function n(t,r,e){function i(a,u){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(n){var r=t[a][1][n];return i(r?r:n)},h,h.exports,n,t,r,e)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<e.length;a++)i(e[a]);return i}({1:[function(t,n,r){(function(r){var e=n.exports={Camera:t("./camera"),World:t("./world"),Minimap:t("./minimap"),mixins:t("./mixins")};r.pixicam=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./camera":52,"./minimap":56,"./mixins":57,"./world":61}],2:[function(t,n,r){function e(t){if(s(t)&&!u(t)&&!(t instanceof i)){if(t instanceof o)return t;if(f.call(t,"__chain__")&&f.call(t,"__wrapped__"))return c(t)}return new o(t)}var i=t("../internal/LazyWrapper"),o=t("../internal/LodashWrapper"),a=t("../internal/baseLodash"),u=t("../lang/isArray"),s=t("../internal/isObjectLike"),c=t("../internal/wrapperClone"),h=Object.prototype,f=h.hasOwnProperty;e.prototype=a.prototype,n.exports=e},{"../internal/LazyWrapper":6,"../internal/LodashWrapper":7,"../internal/baseLodash":13,"../internal/isObjectLike":32,"../internal/wrapperClone":39,"../lang/isArray":41}],3:[function(t,n,r){var e=t("../internal/getNative"),i=e(Date,"now"),o=i||function(){return(new Date).getTime()};n.exports=o},{"../internal/getNative":27}],4:[function(t,n,r){var e=t("../internal/baseFlatten"),i=t("../internal/createWrapper"),o=t("../object/functions"),a=t("./restParam"),u=1,s=a(function(t,n){n=n.length?e(n):o(t);for(var r=-1,a=n.length;++r<a;){var s=n[r];t[s]=i(t[s],u,t)}return t});n.exports=s},{"../internal/baseFlatten":10,"../internal/createWrapper":23,"../object/functions":45,"./restParam":5}],5:[function(t,n,r){function e(t,n){if("function"!=typeof t)throw new TypeError(i);return n=o(void 0===n?t.length-1:+n||0,0),function(){for(var r=arguments,e=-1,i=o(r.length-n,0),a=Array(i);++e<i;)a[e]=r[n+e];switch(n){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var u=Array(n+1);for(e=-1;++e<n;)u[e]=r[e];return u[n]=a,t.apply(this,u)}}var i="Expected a function",o=Math.max;n.exports=e},{}],6:[function(t,n,r){function e(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=a,this.__views__=null}var i=t("./baseCreate"),o=t("./baseLodash"),a=Number.POSITIVE_INFINITY;e.prototype=i(o.prototype),e.prototype.constructor=e,n.exports=e},{"./baseCreate":9,"./baseLodash":13}],7:[function(t,n,r){function e(t,n,r){this.__wrapped__=t,this.__actions__=r||[],this.__chain__=!!n}var i=t("./baseCreate"),o=t("./baseLodash");e.prototype=i(o.prototype),e.prototype.constructor=e,n.exports=e},{"./baseCreate":9,"./baseLodash":13}],8:[function(t,n,r){function e(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}n.exports=e},{}],9:[function(t,n,r){var e=t("../lang/isObject"),i=function(){function t(){}return function(n){if(e(n)){t.prototype=n;var r=new t;t.prototype=null}return r||{}}}();n.exports=i},{"../lang/isObject":44}],10:[function(t,n,r){function e(t,n,r){for(var s=-1,c=t.length,h=-1,f=[];++s<c;){var l=t[s];if(u(l)&&a(l)&&(r||o(l)||i(l))){n&&(l=e(l,n,r));for(var p=-1,d=l.length;++p<d;)f[++h]=l[p]}else r||(f[++h]=l)}return f}var i=t("../lang/isArguments"),o=t("../lang/isArray"),a=t("./isArrayLike"),u=t("./isObjectLike");n.exports=e},{"../lang/isArguments":40,"../lang/isArray":41,"./isArrayLike":28,"./isObjectLike":32}],11:[function(t,n,r){function e(t,n){for(var r=-1,e=n.length,o=-1,a=[];++r<e;){var u=n[r];i(t[u])&&(a[++o]=u)}return a}var i=t("../lang/isFunction");n.exports=e},{"../lang/isFunction":42}],12:[function(t,n,r){function e(t){return"function"==typeof t||!1}n.exports=e},{}],13:[function(t,n,r){function e(){}n.exports=e},{}],14:[function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}n.exports=e},{}],15:[function(t,n,r){var e=t("../utility/identity"),i=t("./metaMap"),o=i?function(t,n){return i.set(t,n),t}:e;n.exports=o},{"../utility/identity":48,"./metaMap":34}],16:[function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}n.exports=e},{}],17:[function(t,n,r){function e(t,n,r){for(var e=r.length,o=-1,a=i(t.length-e,0),u=-1,s=n.length,c=Array(a+s);++u<s;)c[u]=n[u];for(;++o<e;)c[r[o]]=t[o];for(;a--;)c[u++]=t[o++];return c}var i=Math.max;n.exports=e},{}],18:[function(t,n,r){function e(t,n,r){for(var e=-1,o=r.length,a=-1,u=i(t.length-o,0),s=-1,c=n.length,h=Array(u+c);++a<u;)h[a]=t[a];for(var f=a;++s<c;)h[f+s]=n[s];for(;++e<o;)h[f+r[e]]=t[a++];return h}var i=Math.max;n.exports=e},{}],19:[function(t,n,r){(function(r){function e(t,n){function e(){var i=this&&this!==r&&this instanceof e?o:t;return i.apply(n,arguments)}var o=i(t);return e}var i=t("./createCtorWrapper");n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":20}],20:[function(t,n,r){function e(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4])}var r=i(t.prototype),e=t.apply(r,n);return o(e)?e:r}}var i=t("./baseCreate"),o=t("../lang/isObject");n.exports=e},{"../lang/isObject":44,"./baseCreate":9}],21:[function(t,n,r){(function(r){function e(t,n,M,b,_,P,A,L,O,j){function C(){for(var d=arguments.length,v=d,m=Array(d);v--;)m[v]=arguments[v];if(b&&(m=o(m,b,_)),P&&(m=a(m,P,A)),R||I){var w=C.placeholder,S=h(m,w);if(d-=S.length,j>d){var N=L?i(L):null,B=x(j-d,0),E=R?S:null,F=R?null:S,V=R?m:null,X=R?null:m;n|=R?y:g,n&=~(R?g:y),T||(n&=~(l|p));var k=[t,n,M,V,E,X,F,N,O,B],U=e.apply(void 0,k);return s(t)&&f(U,k),U.placeholder=w,U}}var Z=W?M:this,H=z?Z[t]:t;return L&&(m=c(m,L)),q&&O<m.length&&(m.length=O),this&&this!==r&&this instanceof C&&(H=D||u(t)),H.apply(Z,m)}var q=n&w,W=n&l,z=n&p,R=n&v,T=n&d,I=n&m,D=z?null:u(t);return C}var i=t("./arrayCopy"),o=t("./composeArgs"),a=t("./composeArgsRight"),u=t("./createCtorWrapper"),s=t("./isLaziable"),c=t("./reorder"),h=t("./replaceHolders"),f=t("./setData"),l=1,p=2,d=4,v=8,m=16,y=32,g=64,w=128,x=Math.max;n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./arrayCopy":8,"./composeArgs":17,"./composeArgsRight":18,"./createCtorWrapper":20,"./isLaziable":30,"./reorder":36,"./replaceHolders":37,"./setData":38}],22:[function(t,n,r){(function(r){function e(t,n,e,a){function u(){for(var n=-1,i=arguments.length,o=-1,h=a.length,f=Array(i+h);++o<h;)f[o]=a[o];for(;i--;)f[o++]=arguments[++n];var l=this&&this!==r&&this instanceof u?c:t;return l.apply(s?e:this,f)}var s=n&o,c=i(t);return u}var i=t("./createCtorWrapper"),o=1;n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createCtorWrapper":20}],23:[function(t,n,r){function e(t,n,r,e,y,g,w,x){var M=n&l;if(!M&&"function"!=typeof t)throw new TypeError(v);var b=e?e.length:0;if(b||(n&=~(p|d),e=y=null),b-=y?y.length:0,n&d){var _=e,P=y;e=y=null}var A=M?null:s(t),L=[t,n,r,e,y,_,P,g,w,x];if(A&&(c(L,A),n=L[1],x=L[9]),L[9]=null==x?M?0:t.length:m(x-b,0)||0,n==f)var O=o(L[0],L[2]);else O=n!=p&&n!=(f|p)||L[4].length?a.apply(void 0,L):u.apply(void 0,L);var j=A?i:h;return j(O,L)}var i=t("./baseSetData"),o=t("./createBindWrapper"),a=t("./createHybridWrapper"),u=t("./createPartialWrapper"),s=t("./getData"),c=t("./mergeData"),h=t("./setData"),f=1,l=2,p=32,d=64,v="Expected a function",m=Math.max;n.exports=e},{"./baseSetData":15,"./createBindWrapper":19,"./createHybridWrapper":21,"./createPartialWrapper":22,"./getData":24,"./mergeData":33,"./setData":38}],24:[function(t,n,r){var e=t("./metaMap"),i=t("../utility/noop"),o=e?function(t){return e.get(t)}:i;n.exports=o},{"../utility/noop":49,"./metaMap":34}],25:[function(t,n,r){function e(t){for(var n=t.name,r=i[n],e=r?r.length:0;e--;){var o=r[e],a=o.func;if(null==a||a==t)return o.name}return n}var i=t("./realNames");n.exports=e},{"./realNames":35}],26:[function(t,n,r){var e=t("./baseProperty"),i=e("length");n.exports=i},{"./baseProperty":14}],27:[function(t,n,r){function e(t,n){var r=null==t?void 0:t[n];return i(r)?r:void 0}var i=t("../lang/isNative");n.exports=e},{"../lang/isNative":43}],28:[function(t,n,r){function e(t){return null!=t&&o(i(t))}var i=t("./getLength"),o=t("./isLength");n.exports=e},{"./getLength":26,"./isLength":31}],29:[function(t,n,r){function e(t,n){return t="number"==typeof t||i.test(t)?+t:-1,n=null==n?o:n,t>-1&&t%1==0&&n>t}var i=/^\d+$/,o=9007199254740991;n.exports=e},{}],30:[function(t,n,r){function e(t){var n=a(t);if(!(n in i.prototype))return!1;var r=u[n];if(t===r)return!0;var e=o(r);return!!e&&t===e[0]}var i=t("./LazyWrapper"),o=t("./getData"),a=t("./getFuncName"),u=t("../chain/lodash");n.exports=e},{"../chain/lodash":2,"./LazyWrapper":6,"./getData":24,"./getFuncName":25}],31:[function(t,n,r){function e(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;n.exports=e},{}],32:[function(t,n,r){function e(t){return!!t&&"object"==typeof t}n.exports=e},{}],33:[function(t,n,r){function e(t,n){var r=t[1],e=n[1],v=r|e,m=f>v,y=e==f&&r==h||e==f&&r==l&&t[7].length<=n[8]||e==(f|l)&&r==h;if(!m&&!y)return t;e&s&&(t[2]=n[2],v|=r&s?0:c);var g=n[3];if(g){var w=t[3];t[3]=w?o(w,g,n[4]):i(g),t[4]=w?u(t[3],p):i(n[4])}return g=n[5],g&&(w=t[5],t[5]=w?a(w,g,n[6]):i(g),t[6]=w?u(t[5],p):i(n[6])),g=n[7],g&&(t[7]=i(g)),e&f&&(t[8]=null==t[8]?n[8]:d(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=v,t}var i=t("./arrayCopy"),o=t("./composeArgs"),a=t("./composeArgsRight"),u=t("./replaceHolders"),s=1,c=4,h=8,f=128,l=256,p="__lodash_placeholder__",d=Math.min;n.exports=e},{"./arrayCopy":8,"./composeArgs":17,"./composeArgsRight":18,"./replaceHolders":37}],34:[function(t,n,r){(function(r){var e=t("./getNative"),i=e(r,"WeakMap"),o=i&&new i;n.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getNative":27}],35:[function(t,n,r){var e={};n.exports=e},{}],36:[function(t,n,r){function e(t,n){for(var r=t.length,e=a(n.length,r),u=i(t);e--;){var s=n[e];t[e]=o(s,r)?u[s]:void 0}return t}var i=t("./arrayCopy"),o=t("./isIndex"),a=Math.min;n.exports=e},{"./arrayCopy":8,"./isIndex":29}],37:[function(t,n,r){function e(t,n){for(var r=-1,e=t.length,o=-1,a=[];++r<e;)t[r]===n&&(t[r]=i,a[++o]=r);return a}var i="__lodash_placeholder__";n.exports=e},{}],38:[function(t,n,r){var e=t("./baseSetData"),i=t("../date/now"),o=150,a=16,u=function(){var t=0,n=0;return function(r,u){var s=i(),c=a-(s-n);if(n=s,c>0){if(++t>=o)return r}else t=0;return e(r,u)}}();n.exports=u},{"../date/now":3,"./baseSetData":15}],39:[function(t,n,r){function e(t){return t instanceof i?t.clone():new o(t.__wrapped__,t.__chain__,a(t.__actions__))}var i=t("./LazyWrapper"),o=t("./LodashWrapper"),a=t("./arrayCopy");n.exports=e},{"./LazyWrapper":6,"./LodashWrapper":7,"./arrayCopy":8}],40:[function(t,n,r){function e(t){return o(t)&&i(t)&&s.call(t)==a}var i=t("../internal/isArrayLike"),o=t("../internal/isObjectLike"),a="[object Arguments]",u=Object.prototype,s=u.toString;n.exports=e},{"../internal/isArrayLike":28,"../internal/isObjectLike":32}],41:[function(t,n,r){var e=t("../internal/getNative"),i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a="[object Array]",u=Object.prototype,s=u.toString,c=e(Array,"isArray"),h=c||function(t){return o(t)&&i(t.length)&&s.call(t)==a};n.exports=h},{"../internal/getNative":27,"../internal/isLength":31,"../internal/isObjectLike":32}],42:[function(t,n,r){(function(r){var e=t("../internal/baseIsFunction"),i=t("../internal/getNative"),o="[object Function]",a=Object.prototype,u=a.toString,s=i(r,"Uint8Array"),c=e(/x/)||s&&!e(s)?function(t){return u.call(t)==o}:e;n.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/baseIsFunction":12,"../internal/getNative":27}],43:[function(t,n,r){function e(t){return null==t?!1:f.call(t)==a?l.test(c.call(t)):o(t)&&u.test(t)}var i=t("../string/escapeRegExp"),o=t("../internal/isObjectLike"),a="[object Function]",u=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,h=s.hasOwnProperty,f=s.toString,l=RegExp("^"+i(c.call(h)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=e},{"../internal/isObjectLike":32,"../string/escapeRegExp":47}],44:[function(t,n,r){function e(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}n.exports=e},{}],45:[function(t,n,r){function e(t){return i(t,o(t))}var i=t("../internal/baseFunctions"),o=t("./keysIn");n.exports=e},{"../internal/baseFunctions":11,"./keysIn":46}],46:[function(t,n,r){function e(t){if(null==t)return[];s(t)||(t=Object(t));var n=t.length;n=n&&u(n)&&(o(t)||i(t))&&n||0;for(var r=t.constructor,e=-1,c="function"==typeof r&&r.prototype===t,f=Array(n),l=n>0;++e<n;)f[e]=e+"";for(var p in t)l&&a(p,n)||"constructor"==p&&(c||!h.call(t,p))||f.push(p);return f}var i=t("../lang/isArguments"),o=t("../lang/isArray"),a=t("../internal/isIndex"),u=t("../internal/isLength"),s=t("../lang/isObject"),c=Object.prototype,h=c.hasOwnProperty;n.exports=e},{"../internal/isIndex":29,"../internal/isLength":31,"../lang/isArguments":40,"../lang/isArray":41,"../lang/isObject":44}],47:[function(t,n,r){function e(t){return t=i(t),t&&a.test(t)?t.replace(o,"\\$&"):t}var i=t("../internal/baseToString"),o=/[.*+?^${}()|[\]\/\\]/g,a=RegExp(o.source);n.exports=e},{"../internal/baseToString":16}],48:[function(t,n,r){function e(t){return t}n.exports=e},{}],49:[function(t,n,r){function e(){}n.exports=e},{}],50:[function(t,n,r){var e=(t("lodash/function/bindAll"),t("./vendor/augment")),i=(t("./vendor/gl-matrix"),t("./math/rectangle"),t("./math/point")),o=e.defclass({constructor:function(t){this.maxZoom=t.maxZoom||5,this.minZoom=t.minZoom||.1,this.worldBounds=t.worldBounds},clampZoom:function(t){return t>this.maxZoom?this.maxZoom:t<this.minZoom?this.minZoom:t},limitToWorld:function(t){var n=(new i,t.getViewport()),r=this.worldBounds;if(n.y+n.height>r.y+r.height){var e=t.y+(r.y+r.height-(n.y+n.height));t.y=e}if(n.x<r.x){var e=t.x+(r.x-n.x);t.x=e}if(n.x+n.width>r.x+r.width){var e=t.x+(r.x+r.width-(n.x+n.width));t.x=e}if(n.y<r.y){var e=t.y+(r.y-n.y);t.y=e}},update:function(t){t.zoom=this.clampZoom(t.zoom),this.limitToWorld(t)}});n.exports=o},{"./math/point":53,"./math/rectangle":54,"./vendor/augment":59,"./vendor/gl-matrix":60,"lodash/function/bindAll":4}],51:[function(t,n,r){var e=t("lodash/function/bindAll"),i=t("./vendor/augment"),o=t("./vendor/gl-matrix"),a=(t("./math/rectangle"),t("./math/point"),o.vec2),u={NONE:-1,PAN:2},s=i.defclass({constructor:function(t){e(this),this.camera=t,this.state=u.NONE,this.panStart=a.fromValues(0,0),this.panEnd=a.fromValues(0,0),this.panDelta=a.fromValues(0,0),this.panCamera=a.fromValues(0,0)},startAt:function(t,n){this.state=u.PAN,a.set(this.panStart,t,n)},end:function(){this.state=u.NONE},pan:function(t,n,r){this.state!=u.NONE&&(r=r||1,this.panLeft(t*r),this.panUp(n*r))},panLeft:function(t){this.panCamera[0]=t},panUp:function(t){this.panCamera[1]=t},applyPan:function(t,n,r){a.set(this.panEnd,t,n),a.subtract(this.panDelta,this.panStart,this.panEnd),this.pan(this.panDelta[0],this.panDelta[1],this.camera.zoom),a.copy(this.panStart,this.panEnd)},update:function(){var t=this.camera.zoom;this.camera.x+=this.panCamera[0]/t,this.camera.y+=this.panCamera[1]/t,a.set(this.panCamera,0,0)}});n.exports=s},{"./math/point":53,"./math/rectangle":54,"./vendor/augment":59,"./vendor/gl-matrix":60,"lodash/function/bindAll":4}],52:[function(t,n,r){var e=t("lodash/function/bindAll"),i=t("./vendor/augment"),o=t("./vendor/gl-matrix"),a=t("./math/rectangle"),u=t("./math/point"),s=o.mat2d,c=i.defclass({constructor:function(t,n){e(this),this._position=new u(0,0),this._positionLimited=new u(0,0),this._zoomPivot=new u(0,0),this._viewCenter=new u(0,0),this._zoom=1,this.view=new a(0,0,t,n),this._viewport=new a(0,0,0,0),this.transform=new PIXI.Matrix,this.limited=!1},unfollow:function(){this.followTarget=void 0},follow:function(t){this.followTarget=t},getInverseMatrix:function(){var t=this.getMatrix();return s.invert([],t)},cameraToWorldPoint:function(t){return this.worldToScreen(t)},worldToCameraPoint:function(t){return this.screenToWorld(t)},transformPoint:function(t,n){var r=[t.x,t.y];return r=o.vec2.transformMat2d([],r,n),{x:r[0],y:r[1]}},worldToScreen:function(t){return this.transformPoint(t,this.getMatrix())},screenToWorld:function(t){return this.transformPoint(t,this.getInverseMatrix())},tranformRect:function(t,n){var r=this.transformPoint(t.tl,n),e=this.transformPoint({x:t.width,y:t.height},n);return new a(r.x,r.y,e.x-r.x,e.y-r.y)},worldRectToScreen:function(t){return this.tranformRect(t,this.getInverseMatrix())},getViewSize:function(){return this.view},setScreenSize:function(t,n){this.view.width=t,this.view.height=n},getViewport:function(){var t=this.worldToScreen(u.ZERO),n=this.worldToScreen({x:this.view.width,y:this.view.height});return this._viewport.set(t.x,t.y,n.x-t.x,n.y-t.y),this._viewport},getMatrix:function(){var t=s.identity([]);s.translate(t,t,[this._zoomPivot.x,this._zoomPivot.y]);var n=[this.view.x,this.view.y];return s.translate(t,t,[-this._viewCenter.x,-this._viewCenter.y]),s.translate(t,t,n),s.scale(t,t,[1/this.zoom,1/this.zoom]),s.translate(t,t,[-this._zoomPivot.x,-this._zoomPivot.y]),t},update:function(){this.followTarget&&(this.x=this.followTarget.x,this.y=this.followTarget.y),this.updateTransform()},updateTransform:function(){var t=this.getInverseMatrix(),n=this.transform;n.a=t[0],n.b=t[1],n.c=t[2],n.d=t[3],n.tx=t[4],n.ty=t[5]}});Object.defineProperty(c.prototype,"zoom",{get:function(){return this._zoom},set:function(t){.1>t&&(t=.1),this._zoom=t}}),Object.defineProperty(c.prototype,"viewCenterX",{get:function(){return this._viewCenter.x},set:function(t){this._viewCenter.x=t}}),Object.defineProperty(c.prototype,"viewCenterY",{get:function(){return this._viewCenter.y},set:function(t){this._viewCenter.y=t}}),Object.defineProperty(c.prototype,"zoomPivotX",{get:function(){return this._zoomPivot.x},set:function(t){this._zoomPivot.x=t}}),Object.defineProperty(c.prototype,"zoomPivotY",{get:function(){return this._zoomPivot.y},set:function(t){this._zoomPivot.y=t}}),Object.defineProperty(c.prototype,"position",{get:function(){return this._position.set(this.view.x,this.view.y),this._position},set:function(t){"undefined"!=typeof t.x&&(this.view.x=t.x),"undefined"!=typeof t.y&&(this.view.y=t.y)}}),Object.defineProperty(c.prototype,"positionLimited",{get:function(){return this._positionLimited},set:function(t){"undefined"!=typeof t.x&&(this._positionLimited.x=t.x),"undefined"!=typeof t.y&&(this._positionLimited.y=t.y)}}),Object.defineProperty(c.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t}}),Object.defineProperty(c.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t}}),n.exports=c},{"./math/point":53,"./math/rectangle":54,"./vendor/augment":59,"./vendor/gl-matrix":60,"lodash/function/bindAll":4}],53:[function(t,n,r){var e=t("./../vendor/augment"),i=e.defclass({constructor:function(t,n){t=t||0,n=n||0,this.x=t,this.y=n},subtract:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},add:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},toArray:function(){return[this.x,this.y]},reset:function(){this.set(0,0)},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},divideScalar:function(t){if(0!==t){var n=1/t;this.x*=n,this.y*=n}else this.x=0,this.y=0;return this},clone:function(){return new i(this.x,this.y)},normalize:function(){return this.divideScalar(this.length())},set:function(t,n){return this.x=t,this.y=n,this}});i.ZERO=new i,i.subtract=function(t,n){var r=new i(t.x,t.y),e=new i(n.x,n.y);return r.clone().subtract(e)},i.fromAngle=function(t,n){var r=Math.cos(t)*n,e=Math.sin(t)*n;return new i(r,e)},n.exports=i},{"./../vendor/augment":59}],54:[function(t,n,r){var e=t("./../vendor/augment"),i=t("./../math/point"),o=e.defclass({constructor:function(t,n,r,e){t=t||0,n=n||0,r=r||0,e=e||0,this.x=t,this.y=n,this.width=r,this.height=e},clone:function(){return new o(this.x,this.y,this.width,this.height)},scaleWithPoint:function(t){return this.scale(t.x,t.y)},scale:function(t,n){return"undefined"==typeof n&&(n=t),this.x=this.x*t,this.y=this.y*n,this.width=this.width*t,this.height=this.height*n,this},set:function(t,n,r,e){return this.x=t,this.y=n,this.width=r,this.height=e,this}});Object.defineProperty(o.prototype,"left",{get:function(){return this.x}}),Object.defineProperty(o.prototype,"right",{get:function(){return this.x+this.width}}),Object.defineProperty(o.prototype,"top",{get:function(){return this.y}}),Object.defineProperty(o.prototype,"bottom",{get:function(){return this.y+this.height}}),Object.defineProperty(o.prototype,"tl",{get:function(){return new i(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(o.prototype,"tr",{get:function(){return new i(this.x+this.width,this.y)}}),Object.defineProperty(o.prototype,"bl",{get:function(){return new i(this.x,this.bottom)}}),Object.defineProperty(o.prototype,"br",{get:function(){return new i(this.right,this.bottom)}}),Object.defineProperty(o.prototype,"centerX",{get:function(){return this.x+this.halfWidth}}),Object.defineProperty(o.prototype,"centerY",{get:function(){return this.y+this.halfHeight}}),Object.defineProperty(o.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(o.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),n.exports=o},{"./../math/point":53,"./../vendor/augment":59}],55:[function(t,n,r){var e=t("lodash/function/bindAll"),i=t("./vendor/augment"),o=t("./vendor/gl-matrix"),a=(t("./math/rectangle"),t("./math/point")),u=t("./camera-pan"),s=(o.mat2d,i.defclass({constructor:function(t){e(this),this.minimap=t,t.interactive=!0,t.on("mousedown",this.handleMouseDown),this.camera=this.minimap.camera,this.cameraPan=new u(this.minimap.camera)},handleMouseDown:function(t){var n=this.minimap;n.mouseup=n.mouseupoutside=n.touchend=n.touchendoutside=this.handleMouseUp,n.mousemove=this.handleMouseMove;var r=this.mouseToGlobal(t.data.global);this.cameraPan.startAt(-r.x,-r.y)},handleMouseUp:function(t){var n=this.minimap;n.mouseup=n.mouseupoutside=n.touchend=n.touchendoutside=void 0,n.mousemove=void 0,this.cameraPan.end()},mouseToGlobal:function(t){var n=this.minimap.toLocal(t);return n=new a(n.x,n.y),n=this.minimap.minimapToWorld(n)},handleMouseMove:function(t){var n=this.mouseToGlobal(t.data.global);this.cameraPan.applyPan(-n.x,-n.y)},update:function(){this.cameraPan.update()}}));n.exports=s},{"./camera-pan":51,"./math/point":53,"./math/rectangle":54,"./vendor/augment":59,"./vendor/gl-matrix":60,"lodash/function/bindAll":4}],56:[function(t,n,r){var e=(t("lodash/function/bindAll"),t("./vendor/augment")),i=t("./vendor/gl-matrix"),o=t("./math/rectangle"),a=t("./minimap-navigator"),u=t("./math/point"),s=i.mat2d,c=e(PIXI.Container,function(t){this.constructor=function(n,r,e,i){t.constructor.apply(this,arguments),this.camera=e,this.minimapDimensions={width:n,height:r},this.worldBoundRect=new o(0,0,100,100),this.viewportRect=new o(0,0,100,100),this.items=[],this.build(),this.navigator=new a(this)},this.build=function(){this.worldBounds=new PIXI.Graphics,this.worldBounds.alpha=.5,this.addChild(this.worldBounds),this.viewport=new PIXI.Graphics,this.viewport.alpha=.5,this.addChild(this.viewport),this.itemsLayer=new PIXI.Graphics,this.addChild(this.itemsLayer),this.debugLayer=new PIXI.Graphics,this.addChild(this.debugLayer)},this.add=function(t){this.items.push(t)},this.drawObjects=function(){this.itemsLayer.clear();for(var t,n=0,r=this.items.length;r>n;n++){t=this.items[n];var e=t.getLocalBounds(),i=0,a=0;t.anchor&&(i=t.width*-t.anchor.x,a=t.height*-t.anchor.y),e=new o(t.x+i,t.y+a,t.width,t.height),this.drawObject(e)}},this.drawObject=function(t){var n=this.worldRectToMinimap(t);this.drawRect(this.itemsLayer,n.x,n.y,n.width,n.height,{color:65535})},this.setWorldBounds=function(t){this.worldBoundRect=t},this.update=function(){this.navigator.update(),this.viewportRect=this.camera.getViewport(),this.draw()},this.getWorldToMinimapRatio=function(){var t=this.getRatios(this.minimapDimensions,this.worldBoundRect);return{x:t.x,y:t.y}},this.getRatios=function(t,n){var r=t.width,e=t.height,i=n.width,o=n.height,a=r/i,u=e/o,s={x:a,y:u,min:Math.min(a,u),max:Math.max(a,u)};return s},this.worldRectToMinimap=function(t){var n=this.getWorldToMinimapRatio(),r=t.clone();return r.tl=r.tl.subtract(this.worldBoundRect.tl),r.scaleWithPoint(n),r},this.minimapToWorld=function(t){t instanceof u||(t=new u(t.x,t.y));var n=t.toArray(),r=s.identity([]),e=this.getWorldToMinimapRatio();return s.translate(r,r,[this.worldBoundRect.x,this.worldBoundRect.y]),s.scale(r,r,[1/e.x,1/e.y]),i.vec2.transformMat2d(n,n,r),new u(n[0],n[1])},this.worldPointToMinimap=function(t){t instanceof u||(t=new u(t.x,t.y));var n=t.toArray(),r=s.identity([]),e=this.getWorldToMinimapRatio();return s.scale(r,r,[e.x,e.y]),s.translate(r,r,[-this.worldBoundRect.x,-this.worldBoundRect.y]),i.vec2.transformMat2d(n,n,r),new u(n[0],n[1])},this.draw=function(){this.drawViewport(this.viewportRect,16776960),this.drawWorldBounds(this.worldBoundRect,0),this.drawObjects()},this.drawViewport=function(t,n){t=this.worldRectToMinimap(t);this.viewport;this.viewport.position.set(t.x,t.y),this.viewport.clear(),this.drawRect(this.viewport,0,0,t.width,t.height,{color:n})},this.drawWorldBounds=function(t,n){var r=t.clone();r.scaleWithPoint(this.getWorldToMinimapRatio()),this.worldBounds.clear(),this.drawRect(this.worldBounds,0,0,r.width,r.height,{color:n}),this.drawOrigin(this.worldBounds,-r.x,-r.y,r.width,r.height)},this.drawDot=function(t,n,r,e,i){var i=i||{};i.center=!0,i.color=65280,this.drawRect(t,n,r,e,e,i)},this.drawRect=function(t,n,r,e,i,o){var o=o||{},a=o.hasOwnProperty("color")?o.color:16777215,u=o.center===!0;t.beginFill(a),u?t.drawRect(n-e/2,r-i/2,e,i):t.drawRect(n,r,e,i),t.endFill()},this.drawOrigin=function(t,n,r,e,i){var o=n,a=r;t.lineStyle(1,16777215,1),t.drawPolygon(n-o,r,n+e-o,r),t.drawPolygon(n,r-a,n,r+i-a)}});Object.defineProperties(c.prototype,{width:{get:function(){return this.minimapDimensions.width}},height:{get:function(){return this.minimapDimensions.height}}}),n.exports=c},{"./math/point":53,"./math/rectangle":54,"./minimap-navigator":55,"./vendor/augment":59,"./vendor/gl-matrix":60,"lodash/function/bindAll":4}],57:[function(t,n,r){var e=t("./pixi");n.exports={addContainerUpdates:function(){e()}}},{"./pixi":58}],58:[function(t,n,r){var e=function(){PIXI.Container.prototype.update=function(){for(var t=0,n=this.children.length;n>t;++t)this.children[t].update()},PIXI.Container.prototype.preUpdate=function(){for(var t=0,n=this.children.length;n>t;++t)this.children[t].preUpdate()},PIXI.Container.prototype.postUpdate=function(){this.body&&this.body.postUpdate();for(var t=0,n=this.children.length;n>t;++t)this.children[t].postUpdate()}};n.exports=e},{}],59:[function(n,r,e){!function(n,e){"function"==typeof t&&t.amd?t(e):"object"==typeof r?r.exports=e():n.augment=e()}(this,function(){"use strict";var t=function(){},n=Array.prototype.slice,r=function(r,e){var i=t.prototype="function"==typeof r?r.prototype:r,o=new t,a=e.apply(o,n.call(arguments,2).concat(i));if("object"==typeof a)for(var u in a)o[u]=a[u];if(!o.hasOwnProperty("constructor"))return o;var s=o.constructor;return s.prototype=o,s};return r.defclass=function(t){var n=t.constructor;return n.prototype=t,n},r.extend=function(t,n){return r(t,function(t){return this.uber=t,n})},r})},{}],60:[function(n,r,e){!function(n){"use strict";var r={};"undefined"==typeof e?"function"==typeof t&&"object"==typeof t.amd&&t.amd?(r.exports={},t(function(){return r.exports})):r.exports="undefined"!=typeof window?window:n:r.exports=e,function(t){if(!n)var n=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var i={};i.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=i);var o=Math.PI/180;i.toRadian=function(t){return t*o};var a={};a.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var n=new r(2);return n[0]=t[0],n[1]=t[1],n},a.fromValues=function(t,n){var e=new r(2);return e[0]=t,e[1]=n,e},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},a.set=function(t,n,r){return t[0]=n,t[1]=r,t},a.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},a.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t},a.div=a.divide,a.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},a.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},a.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},a.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},a.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)},a.dist=a.distance,a.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e},a.sqrDist=a.squaredDistance,a.length=function(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)},a.len=a.length,a.squaredLength=function(t){var n=t[0],r=t[1];return n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},a.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},a.normalize=function(t,n){var r=n[0],e=n[1],i=r*r+e*e;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},a.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},a.cross=function(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},a.lerp=function(t,n,r,e){var i=n[0],o=n[1];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t},a.random=function(t,n){n=n||1;var r=2*e()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},a.transformMat2=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i,t[1]=r[1]*e+r[3]*i,t},a.transformMat2d=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t},a.transformMat3=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[3]*i+r[6],t[1]=r[1]*e+r[4]*i+r[7],t},a.transformMat4=function(t,n,r){var e=n[0],i=n[1];return t[0]=r[0]*e+r[4]*i+r[12],t[1]=r[1]*e+r[5]*i+r[13],t},a.forEach=function(){var t=a.create();return function(n,r,e,i,o,a){var u,s;for(r||(r=2),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,u=e;s>u;u+=r)t[0]=n[u],t[1]=n[u+1],o(t,t,a),n[u]=t[0],n[u+1]=t[1];return n}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=a);var u={};u.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},u.clone=function(t){var n=new r(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},u.fromValues=function(t,n,e){var i=new r(3);return i[0]=t,i[1]=n,i[2]=e,i},u.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},u.set=function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},u.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},u.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t},u.sub=u.subtract,u.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t;

},u.mul=u.multiply,u.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t},u.div=u.divide,u.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},u.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},u.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},u.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},u.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(r*r+e*e+i*i)},u.dist=u.distance,u.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return r*r+e*e+i*i},u.sqrDist=u.squaredDistance,u.length=function(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)},u.len=u.length,u.squaredLength=function(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e},u.sqrLen=u.squaredLength,u.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},u.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},u.normalize=function(t,n){var r=n[0],e=n[1],i=n[2],o=r*r+e*e+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},u.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},u.cross=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=r[0],u=r[1],s=r[2];return t[0]=i*s-o*u,t[1]=o*a-e*s,t[2]=e*u-i*a,t},u.lerp=function(t,n,r,e){var i=n[0],o=n[1],a=n[2];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t[2]=a+e*(r[2]-a),t},u.random=function(t,n){n=n||1;var r=2*e()*Math.PI,i=2*e()-1,o=Math.sqrt(1-i*i)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*n,t},u.transformMat4=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=r[3]*e+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*e+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*e+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*e+r[6]*i+r[10]*o+r[14])/a,t},u.transformMat3=function(t,n,r){var e=n[0],i=n[1],o=n[2];return t[0]=e*r[0]+i*r[3]+o*r[6],t[1]=e*r[1]+i*r[4]+o*r[7],t[2]=e*r[2]+i*r[5]+o*r[8],t},u.transformQuat=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=r[0],u=r[1],s=r[2],c=r[3],h=c*e+u*o-s*i,f=c*i+s*e-a*o,l=c*o+a*i-u*e,p=-a*e-u*i-s*o;return t[0]=h*c+p*-a+f*-s-l*-u,t[1]=f*c+p*-u+l*-a-h*-s,t[2]=l*c+p*-s+h*-u-f*-a,t},u.rotateX=function(t,n,r,e){var i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(e)-i[2]*Math.sin(e),o[2]=i[1]*Math.sin(e)+i[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},u.rotateY=function(t,n,r,e){var i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[2]*Math.sin(e)+i[0]*Math.cos(e),o[1]=i[1],o[2]=i[2]*Math.cos(e)-i[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},u.rotateZ=function(t,n,r,e){var i=[],o=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],o[0]=i[0]*Math.cos(e)-i[1]*Math.sin(e),o[1]=i[0]*Math.sin(e)+i[1]*Math.cos(e),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},u.forEach=function(){var t=u.create();return function(n,r,e,i,o,a){var u,s;for(r||(r=3),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,u=e;s>u;u+=r)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,a),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}(),u.angle=function(t,n){var r=u.fromValues(t[0],t[1],t[2]),e=u.fromValues(n[0],n[1],n[2]);u.normalize(r,r),u.normalize(e,e);var i=u.dot(r,e);return i>1?0:Math.acos(i)},u.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=u);var s={};s.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},s.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},s.fromValues=function(t,n,e,i){var o=new r(4);return o[0]=t,o[1]=n,o[2]=e,o[3]=i,o},s.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},s.set=function(t,n,r,e,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t},s.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},s.subtract=function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t},s.sub=s.subtract,s.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t},s.mul=s.multiply,s.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t},s.div=s.divide,s.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},s.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},s.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},s.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},s.distance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(r*r+e*e+i*i+o*o)},s.dist=s.distance,s.squaredDistance=function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return r*r+e*e+i*i+o*o},s.sqrDist=s.squaredDistance,s.length=function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.sqrt(n*n+r*r+e*e+i*i)},s.len=s.length,s.squaredLength=function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return n*n+r*r+e*e+i*i},s.sqrLen=s.squaredLength,s.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},s.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},s.normalize=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r*r+e*e+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a),t},s.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},s.lerp=function(t,n,r,e){var i=n[0],o=n[1],a=n[2],u=n[3];return t[0]=i+e*(r[0]-i),t[1]=o+e*(r[1]-o),t[2]=a+e*(r[2]-a),t[3]=u+e*(r[3]-u),t},s.random=function(t,n){return n=n||1,t[0]=e(),t[1]=e(),t[2]=e(),t[3]=e(),s.normalize(t,t),s.scale(t,t,n),t},s.transformMat4=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3];return t[0]=r[0]*e+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*e+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*e+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*e+r[7]*i+r[11]*o+r[15]*a,t},s.transformQuat=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=r[0],u=r[1],s=r[2],c=r[3],h=c*e+u*o-s*i,f=c*i+s*e-a*o,l=c*o+a*i-u*e,p=-a*e-u*i-s*o;return t[0]=h*c+p*-a+f*-s-l*-u,t[1]=f*c+p*-u+l*-a-h*-s,t[2]=l*c+p*-s+h*-u-f*-a,t},s.forEach=function(){var t=s.create();return function(n,r,e,i,o,a){var u,s;for(r||(r=4),e||(e=0),s=i?Math.min(i*r+e,n.length):n.length,u=e;s>u;u+=r)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,a),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}(),s.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=s);var c={};c.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.clone=function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},c.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.transpose=function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},c.invert=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r*o-i*e;return a?(a=1/a,t[0]=o*a,t[1]=-e*a,t[2]=-i*a,t[3]=r*a,t):null},c.adjoint=function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},c.multiply=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=r[0],s=r[1],c=r[2],h=r[3];return t[0]=e*u+o*s,t[1]=i*u+a*s,t[2]=e*c+o*h,t[3]=i*c+a*h,t},c.mul=c.multiply,c.rotate=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+o*u,t[1]=i*s+a*u,t[2]=e*-u+o*s,t[3]=i*-u+a*s,t},c.scale=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=r[0],s=r[1];return t[0]=e*u,t[1]=i*u,t[2]=o*s,t[3]=a*s,t},c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},c.LDU=function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},"undefined"!=typeof t&&(t.mat2=c);var h={};h.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.clone=function(t){var n=new r(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},h.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.invert=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=r*o-e*i;return s?(s=1/s,t[0]=o*s,t[1]=-e*s,t[2]=-i*s,t[3]=r*s,t[4]=(i*u-o*a)*s,t[5]=(e*a-r*u)*s,t):null},h.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},h.multiply=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=r[0],h=r[1],f=r[2],l=r[3],p=r[4],d=r[5];return t[0]=e*c+o*h,t[1]=i*c+a*h,t[2]=e*f+o*l,t[3]=i*f+a*l,t[4]=e*p+o*d+u,t[5]=i*p+a*d+s,t},h.mul=h.multiply,h.rotate=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=Math.sin(r),h=Math.cos(r);return t[0]=e*h+o*c,t[1]=i*h+a*c,t[2]=e*-c+o*h,t[3]=i*-c+a*h,t[4]=u,t[5]=s,t},h.scale=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=r[0],h=r[1];return t[0]=e*c,t[1]=i*c,t[2]=o*h,t[3]=a*h,t[4]=u,t[5]=s,t},h.translate=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=r[0],h=r[1];return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=e*c+o*h+u,t[5]=i*c+a*h+s,t},h.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=h);var f={};f.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},f.clone=function(t){var n=new r(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},f.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},f.invert=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],h=n[8],f=h*a-u*c,l=-h*o+u*s,p=c*o-a*s,d=r*f+e*l+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-h*e+i*c)*d,t[2]=(u*e-i*a)*d,t[3]=l*d,t[4]=(h*r-i*s)*d,t[5]=(-u*r+i*o)*d,t[6]=p*d,t[7]=(-c*r+e*s)*d,t[8]=(a*r-e*o)*d,t):null},f.adjoint=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],h=n[8];return t[0]=a*h-u*c,t[1]=i*c-e*h,t[2]=e*u-i*a,t[3]=u*s-o*h,t[4]=r*h-i*s,t[5]=i*o-r*u,t[6]=o*c-a*s,t[7]=e*s-r*c,t[8]=r*a-e*o,t},f.determinant=function(t){var n=t[0],r=t[1],e=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return n*(c*o-a*s)+r*(-c*i+a*u)+e*(s*i-o*u)},f.multiply=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],h=n[7],f=n[8],l=r[0],p=r[1],d=r[2],v=r[3],m=r[4],y=r[5],g=r[6],w=r[7],x=r[8];return t[0]=l*e+p*a+d*c,t[1]=l*i+p*u+d*h,t[2]=l*o+p*s+d*f,t[3]=v*e+m*a+y*c,t[4]=v*i+m*u+y*h,t[5]=v*o+m*s+y*f,t[6]=g*e+w*a+x*c,t[7]=g*i+w*u+x*h,t[8]=g*o+w*s+x*f,t},f.mul=f.multiply,f.translate=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],h=n[7],f=n[8],l=r[0],p=r[1];return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=l*e+p*a+c,t[7]=l*i+p*u+h,t[8]=l*o+p*s+f,t},f.rotate=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],h=n[7],f=n[8],l=Math.sin(r),p=Math.cos(r);return t[0]=p*e+l*a,t[1]=p*i+l*u,t[2]=p*o+l*s,t[3]=p*a-l*e,t[4]=p*u-l*i,t[5]=p*s-l*o,t[6]=c,t[7]=h,t[8]=f,t},f.scale=function(t,n,r){var e=r[0],i=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},f.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},f.fromQuat=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r+r,u=e+e,s=i+i,c=r*a,h=e*a,f=e*u,l=i*a,p=i*u,d=i*s,v=o*a,m=o*u,y=o*s;return t[0]=1-f-d,t[3]=h-y,t[6]=l+m,t[1]=h+y,t[4]=1-c-d,t[7]=p-v,t[2]=l-m,t[5]=p+v,t[8]=1-c-f,t},f.normalFromMat4=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],h=n[8],f=n[9],l=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],g=r*u-e*a,w=r*s-i*a,x=r*c-o*a,M=e*s-i*u,b=e*c-o*u,_=i*c-o*s,P=h*v-f*d,A=h*m-l*d,L=h*y-p*d,O=f*m-l*v,j=f*y-p*v,C=l*y-p*m,q=g*C-w*j+x*O+M*L-b*A+_*P;return q?(q=1/q,t[0]=(u*C-s*j+c*O)*q,t[1]=(s*L-a*C-c*A)*q,t[2]=(a*j-u*L+c*P)*q,t[3]=(i*j-e*C-o*O)*q,t[4]=(r*C-i*L+o*A)*q,t[5]=(e*L-r*j-o*P)*q,t[6]=(v*_-m*b+y*M)*q,t[7]=(m*x-d*_-y*w)*q,t[8]=(d*b-v*x+y*g)*q,t):null},f.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=f);var l={};l.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.clone=function(t){var n=new r(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},l.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.transpose=function(t,n){if(t===n){var r=n[1],e=n[2],i=n[3],o=n[6],a=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},l.invert=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],h=n[8],f=n[9],l=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],g=r*u-e*a,w=r*s-i*a,x=r*c-o*a,M=e*s-i*u,b=e*c-o*u,_=i*c-o*s,P=h*v-f*d,A=h*m-l*d,L=h*y-p*d,O=f*m-l*v,j=f*y-p*v,C=l*y-p*m,q=g*C-w*j+x*O+M*L-b*A+_*P;return q?(q=1/q,t[0]=(u*C-s*j+c*O)*q,t[1]=(i*j-e*C-o*O)*q,t[2]=(v*_-m*b+y*M)*q,t[3]=(l*b-f*_-p*M)*q,t[4]=(s*L-a*C-c*A)*q,t[5]=(r*C-i*L+o*A)*q,t[6]=(m*x-d*_-y*w)*q,t[7]=(h*_-l*x+p*w)*q,t[8]=(a*j-u*L+c*P)*q,t[9]=(e*L-r*j-o*P)*q,t[10]=(d*b-v*x+y*g)*q,t[11]=(f*x-h*b-p*g)*q,t[12]=(u*A-a*O-s*P)*q,t[13]=(r*O-e*A+i*P)*q,t[14]=(v*w-d*M-m*g)*q,t[15]=(h*M-f*w+l*g)*q,t):null},l.adjoint=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],h=n[8],f=n[9],l=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15];return t[0]=u*(l*y-p*m)-f*(s*y-c*m)+v*(s*p-c*l),t[1]=-(e*(l*y-p*m)-f*(i*y-o*m)+v*(i*p-o*l)),t[2]=e*(s*y-c*m)-u*(i*y-o*m)+v*(i*c-o*s),t[3]=-(e*(s*p-c*l)-u*(i*p-o*l)+f*(i*c-o*s)),t[4]=-(a*(l*y-p*m)-h*(s*y-c*m)+d*(s*p-c*l)),t[5]=r*(l*y-p*m)-h*(i*y-o*m)+d*(i*p-o*l),t[6]=-(r*(s*y-c*m)-a*(i*y-o*m)+d*(i*c-o*s)),t[7]=r*(s*p-c*l)-a*(i*p-o*l)+h*(i*c-o*s),t[8]=a*(f*y-p*v)-h*(u*y-c*v)+d*(u*p-c*f),t[9]=-(r*(f*y-p*v)-h*(e*y-o*v)+d*(e*p-o*f)),t[10]=r*(u*y-c*v)-a*(e*y-o*v)+d*(e*c-o*u),t[11]=-(r*(u*p-c*f)-a*(e*p-o*f)+h*(e*c-o*u)),t[12]=-(a*(f*m-l*v)-h*(u*m-s*v)+d*(u*l-s*f)),t[13]=r*(f*m-l*v)-h*(e*m-i*v)+d*(e*l-i*f),t[14]=-(r*(u*m-s*v)-a*(e*m-i*v)+d*(e*s-i*u)),t[15]=r*(u*l-s*f)-a*(e*l-i*f)+h*(e*s-i*u),t},l.determinant=function(t){var n=t[0],r=t[1],e=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],h=t[9],f=t[10],l=t[11],p=t[12],d=t[13],v=t[14],m=t[15],y=n*a-r*o,g=n*u-e*o,w=n*s-i*o,x=r*u-e*a,M=r*s-i*a,b=e*s-i*u,_=c*d-h*p,P=c*v-f*p,A=c*m-l*p,L=h*v-f*d,O=h*m-l*d,j=f*m-l*v;return y*j-g*O+w*L+x*A-M*P+b*_},l.multiply=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],h=n[7],f=n[8],l=n[9],p=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15],w=r[0],x=r[1],M=r[2],b=r[3];return t[0]=w*e+x*u+M*f+b*v,t[1]=w*i+x*s+M*l+b*m,t[2]=w*o+x*c+M*p+b*y,t[3]=w*a+x*h+M*d+b*g,w=r[4],x=r[5],M=r[6],b=r[7],t[4]=w*e+x*u+M*f+b*v,t[5]=w*i+x*s+M*l+b*m,t[6]=w*o+x*c+M*p+b*y,t[7]=w*a+x*h+M*d+b*g,w=r[8],x=r[9],M=r[10],b=r[11],t[8]=w*e+x*u+M*f+b*v,t[9]=w*i+x*s+M*l+b*m,t[10]=w*o+x*c+M*p+b*y,t[11]=w*a+x*h+M*d+b*g,w=r[12],x=r[13],M=r[14],b=r[15],t[12]=w*e+x*u+M*f+b*v,t[13]=w*i+x*s+M*l+b*m,t[14]=w*o+x*c+M*p+b*y,t[15]=w*a+x*h+M*d+b*g,t},l.mul=l.multiply,l.translate=function(t,n,r){var e,i,o,a,u,s,c,h,f,l,p,d,v=r[0],m=r[1],y=r[2];return n===t?(t[12]=n[0]*v+n[4]*m+n[8]*y+n[12],t[13]=n[1]*v+n[5]*m+n[9]*y+n[13],t[14]=n[2]*v+n[6]*m+n[10]*y+n[14],t[15]=n[3]*v+n[7]*m+n[11]*y+n[15]):(e=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],h=n[7],f=n[8],l=n[9],p=n[10],d=n[11],t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=p,t[11]=d,t[12]=e*v+u*m+f*y+n[12],t[13]=i*v+s*m+l*y+n[13],t[14]=o*v+c*m+p*y+n[14],t[15]=a*v+h*m+d*y+n[15]),t},l.scale=function(t,n,r){var e=r[0],i=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},l.rotate=function(t,r,e,i){var o,a,u,s,c,h,f,l,p,d,v,m,y,g,w,x,M,b,_,P,A,L,O,j,C=i[0],q=i[1],W=i[2],z=Math.sqrt(C*C+q*q+W*W);return Math.abs(z)<n?null:(z=1/z,C*=z,q*=z,W*=z,o=Math.sin(e),a=Math.cos(e),u=1-a,s=r[0],c=r[1],h=r[2],f=r[3],l=r[4],p=r[5],d=r[6],v=r[7],m=r[8],y=r[9],g=r[10],w=r[11],x=C*C*u+a,M=q*C*u+W*o,b=W*C*u-q*o,_=C*q*u-W*o,P=q*q*u+a,A=W*q*u+C*o,L=C*W*u+q*o,O=q*W*u-C*o,j=W*W*u+a,t[0]=s*x+l*M+m*b,t[1]=c*x+p*M+y*b,t[2]=h*x+d*M+g*b,t[3]=f*x+v*M+w*b,t[4]=s*_+l*P+m*A,t[5]=c*_+p*P+y*A,t[6]=h*_+d*P+g*A,t[7]=f*_+v*P+w*A,t[8]=s*L+l*O+m*j,t[9]=c*L+p*O+y*j,t[10]=h*L+d*O+g*j,t[11]=f*L+v*O+w*j,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},l.rotateX=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[4],a=n[5],u=n[6],s=n[7],c=n[8],h=n[9],f=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*e,t[5]=a*i+h*e,t[6]=u*i+f*e,t[7]=s*i+l*e,t[8]=c*i-o*e,t[9]=h*i-a*e,t[10]=f*i-u*e,t[11]=l*i-s*e,t},l.rotateY=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[0],a=n[1],u=n[2],s=n[3],c=n[8],h=n[9],f=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*e,t[1]=a*i-h*e,t[2]=u*i-f*e,t[3]=s*i-l*e,t[8]=o*e+c*i,t[9]=a*e+h*i,t[10]=u*e+f*i,t[11]=s*e+l*i,t},l.rotateZ=function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[0],a=n[1],u=n[2],s=n[3],c=n[4],h=n[5],f=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*e,t[1]=a*i+h*e,t[2]=u*i+f*e,t[3]=s*i+l*e,t[4]=c*i-o*e,t[5]=h*i-a*e,t[6]=f*i-u*e,t[7]=l*i-s*e,t},l.fromRotationTranslation=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=e+e,s=i+i,c=o+o,h=e*u,f=e*s,l=e*c,p=i*s,d=i*c,v=o*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(p+v),t[1]=f+g,t[2]=l-y,t[3]=0,t[4]=f-g,t[5]=1-(h+v),t[6]=d+m,t[7]=0,t[8]=l+y,t[9]=d-m,t[10]=1-(h+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},l.fromQuat=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r+r,u=e+e,s=i+i,c=r*a,h=e*a,f=e*u,l=i*a,p=i*u,d=i*s,v=o*a,m=o*u,y=o*s;return t[0]=1-f-d,t[1]=h+y,t[2]=l-m,t[3]=0,t[4]=h-y,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=l+m,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.frustum=function(t,n,r,e,i,o,a){var u=1/(r-n),s=1/(i-e),c=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(i+e)*s,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},l.perspective=function(t,n,r,e,i){var o=1/Math.tan(n/2),a=1/(e-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+e)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*e*a,t[15]=0,t},l.ortho=function(t,n,r,e,i,o,a){var u=1/(n-r),s=1/(e-i),c=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*u,t[13]=(i+e)*s,t[14]=(a+o)*c,t[15]=1,t},l.lookAt=function(t,r,e,i){var o,a,u,s,c,h,f,p,d,v,m=r[0],y=r[1],g=r[2],w=i[0],x=i[1],M=i[2],b=e[0],_=e[1],P=e[2];return Math.abs(m-b)<n&&Math.abs(y-_)<n&&Math.abs(g-P)<n?l.identity(t):(f=m-b,p=y-_,d=g-P,v=1/Math.sqrt(f*f+p*p+d*d),f*=v,p*=v,d*=v,o=x*d-M*p,a=M*f-w*d,u=w*p-x*f,v=Math.sqrt(o*o+a*a+u*u),v?(v=1/v,o*=v,a*=v,u*=v):(o=0,a=0,u=0),s=p*u-d*a,c=d*o-f*u,h=f*a-p*o,v=Math.sqrt(s*s+c*c+h*h),v?(v=1/v,s*=v,c*=v,h*=v):(s=0,c=0,h=0),t[0]=o,t[1]=s,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*m+a*y+u*g),t[13]=-(s*m+c*y+h*g),t[14]=-(f*m+p*y+d*g),t[15]=1,t)},l.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=l);var p={};p.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.rotationTo=function(){var t=u.create(),n=u.fromValues(1,0,0),r=u.fromValues(0,1,0);return function(e,i,o){var a=u.dot(i,o);return-.999999>a?(u.cross(t,n,i),u.length(t)<1e-6&&u.cross(t,r,i),u.normalize(t,t),p.setAxisAngle(e,t,Math.PI),e):a>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(u.cross(t,i,o),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+a,p.normalize(e,e))}}(),p.setAxes=function(){var t=f.create();return function(n,r,e,i){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],p.normalize(n,p.fromMat3(n,t))}}(),p.clone=s.clone,p.fromValues=s.fromValues,p.copy=s.copy,p.set=s.set,p.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.setAxisAngle=function(t,n,r){r=.5*r;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t},p.add=s.add,p.multiply=function(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],u=r[0],s=r[1],c=r[2],h=r[3];return t[0]=e*h+a*u+i*c-o*s,t[1]=i*h+a*s+o*u-e*c,t[2]=o*h+a*c+e*s-i*u,t[3]=a*h-e*u-i*s-o*c,t},p.mul=p.multiply,p.scale=s.scale,p.rotateX=function(t,n,r){r*=.5;var e=n[0],i=n[1],o=n[2],a=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-e*u,t},p.rotateY=function(t,n,r){r*=.5;var e=n[0],i=n[1],o=n[2],a=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s-o*u,t[1]=i*s+a*u,t[2]=o*s+e*u,t[3]=a*s-i*u,t},p.rotateZ=function(t,n,r){r*=.5;var e=n[0],i=n[1],o=n[2],a=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+i*u,t[1]=i*s-e*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t},p.calculateW=function(t,n){var r=n[0],e=n[1],i=n[2];return t[0]=r,t[1]=e,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-i*i)),t},p.dot=s.dot,p.lerp=s.lerp,p.slerp=function(t,n,r,e){var i,o,a,u,s,c=n[0],h=n[1],f=n[2],l=n[3],p=r[0],d=r[1],v=r[2],m=r[3];return o=c*p+h*d+f*v+l*m,0>o&&(o=-o,p=-p,d=-d,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-e)*i)/a,s=Math.sin(e*i)/a):(u=1-e,s=e),t[0]=u*c+s*p,t[1]=u*h+s*d,t[2]=u*f+s*v,t[3]=u*l+s*m,t},p.invert=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r*r+e*e+i*i+o*o,u=a?1/a:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-i*u,t[3]=o*u,t},p.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},p.length=s.length,p.len=p.length,p.squaredLength=s.squaredLength,p.sqrLen=p.squaredLength,p.normalize=s.normalize,p.fromMat3=function(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(n[3*o+a]-n[3*a+o])*r,t[o]=(n[3*o+i]+n[3*i+o])*r,t[a]=(n[3*a+i]+n[3*i+a])*r}return t},p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=p)}(r.exports)}(this)},{}],61:[function(t,n,r){var e=t("./vendor/augment"),i=t("./camera"),o=t("./math/rectangle"),a=(t("./minimap"),t("./camera-constrain")),u=t("./mixins"),s=e(PIXI.Container,function(t){this.constructor=function(n){t.constructor.apply(this,arguments),n.width,n.height,n.screenWidth,n.screenHeight,n.centerX,n.centerY,this.worldRectangle=new o(n.centerX,n.centerY,n.width,n.height),this.camera=new i(n.screenWidth,n.screenHeight),this.camera.zoomPivotX=this.camera.viewCenterX=n.screenWidth/2,this.camera.zoomPivotY=this.camera.viewCenterY=n.screenHeight/2,this.cameraConstrain=new a({worldBounds:this.worldRectangle})},this.setSize=function(t,n){this.worldRectangle.width=t,this.worldRectangle.height=n},this.setScreenSize=function(t,n){this.camera.setScreenSize(t,n)},this.setCenter=function(t,n){},this.update=function(){if(this.camera.update(),this.cameraConstrain.update(this.camera),s.__updateMixed)for(var t=0,n=this.children.length;n>t;++t)this.children[t]&&this.children[t].update()},this.updateTransform=function(){var t,n,r,e,i=this.camera.transform,o=this.worldTransform;t=this.scale.x,n=this.scale.y,r=this.position.x-this.pivot.x*t,e=this.position.y-this.pivot.y*n,o.a=t*i.a,o.b=t*i.b,o.c=n*i.c,o.d=n*i.d,o.tx=r*i.a+e*i.c+i.tx,o.ty=r*i.b+e*i.d+i.ty;for(var a=0,u=this.children.length;u>a;++a)this.children[a].updateTransform()}});s.mixinUpdates=function(){s.__updateMixed=!0,u.addContainerUpdates()},n.exports=s},{"./camera":52,"./camera-constrain":50,"./math/rectangle":54,"./minimap":56,"./mixins":57,"./vendor/augment":59}]},{},[1])(1)});